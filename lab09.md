# Top-down design(“自上向下，逐步求精”的编程方法)
## 什么是Top-down design？
自上而下和自下而上都是信息处理和知识排序的策略，用于各种领域，包括软件、人文和科学理论（见系统）以及管理和组织。在实践中，它们可以被看作是一种思维、教学或领导风格。          
自上而下的方法（也称为逐步设计，在某些情况下用作分解的同义词）本质上是系统分解，以便以逆向工程的方式深入了解其组成子系统。在自顶向下的方法中，系统的概述被制定，指定，但不详细说明，任何第一级子系统。然后对每个子系统进行更详细的细化，有时在许多附加的子系统级别中进行细化，直到整个规范被简化为基本元素。自顶向下的模型通常是在“黑箱”的帮助下指定的，这使得操作更容易。然而，黑箱可能无法澄清基本机制或细节足够逼真地验证模型。自上而下的方法从大局开始。它从那里分解成更小的部分。          
在软件开发过程中，自上而下和自下而上的方法起着关键的作用。自上而下的方法强调计划和对系统的完全理解。在系统至少一些部分的设计中，在达到足够的细节水平之前，无法开始编码是固有的。自顶向下的方法是通过连接存根代替模块来实现的。然而，这会延迟系统的最终功能单元的测试，直到重要的设计完成为止。自下而上强调编码和早期测试，一旦指定了第一个模块，就可以开始测试。然而，这种方法存在这样的风险，即模块可能被编码，而不清楚它们如何链接到系统的其他部分，并且这种链接可能不像最初想象的那么容易。代码的可重用性是自底向上方法的主要优点之一。      
自顶向下的设计是在20世纪70年代由IBM研究人员Harlan Mills和尼古拉斯·沃斯推动的。米尔斯为实际应用开发了结构化编程概念，并在1969年的一个自动化纽约时报停尸房指数的项目中测试了它们。这个项目的工程和管理的成功导致了自顶向下方法在IBM和其他计算机行业中的传播。在其它成就中，Pascal编程语言的开发者Niklaus Wirth写了一篇有影响力的论文《逐步细化程序开发》。由于Niklaus Wirth继续开发诸如Modula和Oberon之类的语言（人们可以在了解整个程序规范之前定义一个模块），因此可以推断自顶向下编程并不是他所提倡的。直到20世纪80年代后期，自顶向下方法在软件工程中一直受到青睐，和面向对象编程帮助证明了自顶向下和自底向上编程的两个方面都可以被利用的思想。                            
现代软件设计方法通常采用自上而下和自下而上的方法。虽然理解完整的系统通常被认为是良好设计的必要条件，在理论上导致自上而下的方法，但是大多数软件项目都试图在某种程度上利用现有的代码。预先存在的模块设计了自下而上的味道。一些设计方法也使用一种方法，其中部分功能系统的设计和编码以完成，然后扩展该系统以满足项目的所有要求。 
## 设计一个洗衣机的控制程序
### 1.首先我们要粗略的定出这个控制程序的步骤
1）选择洗衣模式：对应水位，注水时间      
2）注水， 水位计计水位    
3）浸泡， 计时器计时  
4）电机转动, 左3次，右3次         
5）排水， 水位计计水位         
6）电机转动（脱水）      
7）结束 
### 2.列出每个步骤后，我们再将每个步骤的细节用伪代码补充完整
1. READ 用户选择模式       
2. REPEAT 打开进水阀门         
3. UNTILL 水位=注水要求
4. 关闭进水阀门
5. REPEAT 浸泡
6. UNTILL 时间 = 时间要求
7. WHILE(电机启动时间>0)           
1). REPEAT  
电机左转3次  
电机右转3次    
时间-1单位   
2).ENDWHILE    
WHILE(水位！=0)   
3).排水     
8. ENDWHILE
FOR（脱水时间>0） 
电机转动
9. ENDFOR
10. 关闭电源      
### 3.细化每个步骤之后我们还可以提取一些共性功能模块（函数），简化“正常洗衣”程序，使程序 变得更利于人们理解和修改维护。例如： wait(time) //等待指定的时间；注水(volume,timeout) //在指定时间内完成水，否则停机；排水(timeout)。 等子程序
注水：1)打开进水阀门       
2）注水到水位要求     
3）关闭进水阀门